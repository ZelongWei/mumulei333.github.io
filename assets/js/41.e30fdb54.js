(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{649:function(a,t,s){"use strict";s.r(t);var r=s(4),e=Object(r.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"ubuntu安装rabbitmq"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu安装rabbitmq"}},[a._v("#")]),a._v(" "),s("strong",[a._v("Ubuntu安装RabbitMQ")])]),a._v(" "),s("ol",[s("li",[s("h2",{attrs:{id:"环境准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境准备"}},[a._v("#")]),a._v(" 环境准备")]),a._v(" "),s("p",[a._v("由于RabbitMQ采用的Erlang语言编写的，故需先安装Erlang")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("更新软件列表")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" update\n")])])])]),a._v(" "),s("li",[s("p",[a._v("安装Erlang")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" erlang-nox \n")])])])])])]),a._v(" "),s("li",[s("h2",{attrs:{id:"安装rabbitmq"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装rabbitmq"}},[a._v("#")]),a._v(" "),s("strong",[a._v("安装")]),a._v("RabbitMQ")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("添加rabbitmq的仓库列表配置文件")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("echo 'deb http://www.rabbitmq.com/debian/ testing main' | sudo tee /etc/apt/sources.list.d/rabbitmq.list\n")])])])]),a._v(" "),s("li",[s("p",[a._v("加入rabbitmq signing key")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("wget -O- https://www.rabbitmq.com/rabbitmq-release-signing-key.asc | sudo apt-key add -\n")])])])]),a._v(" "),s("li",[s("p",[a._v("更新软件列表")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("sudo apt-get update\n")])])])]),a._v(" "),s("li",[s("p",[a._v("安装RabbitMq，安装完之后rabbitmq默认已启动")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("sudo apt-get install rabbitmq-server\n")])])])])])]),a._v(" "),s("li",[s("h2",{attrs:{id:"启用插件管理功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启用插件管理功能"}},[a._v("#")]),a._v(" 启用插件管理功能")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("启用web管理插件")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("sudo rabbitmq-plugins enable rabbitmq_management\n")])])])]),a._v(" "),s("li",[s("p",[a._v("重启rabbitmq服务(这一步容易发生错误，第6步有本人安装过程中发生的错误不知道对大家是否有帮助)")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("sudo systemctl restart rabbitmq-server\n")])])])])])]),a._v(" "),s("li",[s("h2",{attrs:{id:"添加账号配置权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加账号配置权限"}},[a._v("#")]),a._v(" 添加账号配置权限")]),a._v(" "),s("h3",{attrs:{id:"账号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#账号"}},[a._v("#")]),a._v(" 账号")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("添加账号，这里的账号是admin，密码是19961225")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" rabbitmqctl add_user admin "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("19961225")]),a._v("\n")])])])]),a._v(" "),s("li",[s("p",[a._v("可以使用该明天查看账号列表，其中(guest)为默认游客账户，账号密码都是guest")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" rabbitmqctl list_users\n")])])])])]),a._v(" "),s("h3",{attrs:{id:"权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#权限"}},[a._v("#")]),a._v(" 权限")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("授权")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" rabbitmqctl  set_permissions -p / admin "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'.*'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'.*'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'.*'")]),a._v("\n")])])])]),a._v(" "),s("li",[s("p",[a._v("查看权限列表")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" rabbitmqctl list_permissions -p /\n")])])])]),a._v(" "),s("li",[s("p",[a._v("赋予administrator角色")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" rabbitmqctl set_user_tags admin administrator\n")])])])])])]),a._v(" "),s("li",[s("h2",{attrs:{id:"常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[a._v("#")]),a._v(" 常用命令")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("启动rabbitMq服务")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" rabbitmq-server start\n")])])]),s("p",[a._v("后台运行启动")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" rabbitmq-server -detached\n")])])])]),a._v(" "),s("li",[s("p",[a._v("停止rabbitMq服务")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" rabbitmq-server stop\n")])])])]),a._v(" "),s("li",[s("p",[a._v("重启rabbitMq服务")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" rabbitmq-server stop\n")])])])])])]),a._v(" "),s("li",[s("h2",{attrs:{id:"问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[a._v("#")]),a._v(" 问题")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("在操作RabbitMq服务时出现error，无论是启动，重启，停止，都会出现以下问题")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ERROR: node with name "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"rabbit"')]),a._v(" already running on "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"xxxxxxxxx"')]),a._v("\n")])])]),s("p",[s("strong",[a._v("解决方法")])]),a._v(" "),s("p",[s("code",[a._v("ps -ef|grep rabbit")]),a._v("找到RabbitMq进程，全部kill，然后再重启"),s("code",[a._v("rabbitmq-server start")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('root@xxxxxxxxx:/etc/rabbitmq# ps -ef|grep rabbit\nrabbitmq  4328     1  0 15:30 ?        00:00:00 /bin/sh /usr/sbin/rabbitmq-server\nrabbitmq  4333  4328  0 15:30 ?        00:00:00 /bin/sh /usr/lib/rabbitmq/bin/rabbitmq-server\nrabbitmq  4485     1  0 15:30 ?        00:00:00 /usr/lib/erlang/erts-9.2/bin/epmd -daemon\nrabbitmq  4589  4333  0 15:30 ?        00:00:04 /usr/lib/erlang/erts-9.2/bin/beam.smp -W w -A 64 -P 1048576 -t 5000000 -stbt db -zdbbl 32000 -K true -B i -- -root /usr/lib/erlang -progname erl -- -home /var/lib/rabbitmq -- -pa /usr/lib/rabbitmq/lib/rabbitmq_server-3.6.10/ebin -noshell -noinput -s rabbit boot -sname rabbit@xxxxxxxxx -boot start_sasl -kernel inet_default_connect_options [{nodelay,true}] -sasl errlog_type error -sasl sasl_error_logger false -rabbit error_logger {file,"/var/log/rabbitmq/rabbit@xxxxxxxxx.log"} -rabbit sasl_error_logger {file,"/var/log/rabbitmq/rabbit@xxxxxxxxx-sasl.log"} -rabbit enabled_plugins_file "/etc/rabbitmq/enabled_plugins" -rabbit plugins_dir "/usr/lib/rabbitmq/plugins:/usr/lib/rabbitmq/lib/rabbitmq_server-3.6.10/plugins" -rabbit plugins_expand_dir "/var/lib/rabbitmq/mnesia/rabbit@xxxxxxxxx-plugins-expand" -os_mon start_cpu_sup false -os_mon start_disksup false -os_mon start_memsup false -mnesia dir "/var/lib/rabbitmq/mnesia/rabbit@xxxxxxxxx" -kernel inet_dist_listen_min 25672 -kernel inet_dist_listen_max 25672\nrabbitmq  4714  4589  0 15:30 ?        00:00:00 erl_child_setup 65536\nrabbitmq  4769  4714  0 15:30 ?        00:00:00 inet_gethost 4\nrabbitmq  4770  4769  0 15:30 ?        00:00:00 inet_gethost 4\nroot      6940  3172  0 15:57 pts/0    00:00:00 grep --color=auto rabbit\nroot@xxxxxxxxx:/etc/rabbitmq# kill 4328\nroot@xxxxxxxxx:/etc/rabbitmq# kill 4333\n-bash: kill: (4333) - No such process\nroot@xxxxxxxxx:/etc/rabbitmq# kill 4485\n-bash: kill: (4485) - No such process\nroot@xxxxxxxxx:/etc/rabbitmq# ps -ef|grep rabbit\nrabbitmq  7225     1  0 15:58 ?        00:00:00 /usr/lib/erlang/erts-9.2/bin/epmd -daemon\nroot      7256  3172  0 15:58 pts/0    00:00:00 grep --color=auto rabbit\nroot@xxxxxxxxx:/etc/rabbitmq# kill 7225\nroot@xxxxxxxxx:/etc/rabbitmq# ps -ef|grep rabbit\nroot      7258  3172  0 15:58 pts/0    00:00:00 grep --color=auto rabbit\nroot@xxxxxxxxx:/etc/rabbitmq# sudo rabbitmq-server start\n\n              RabbitMQ 3.6.10. Copyright (C) 2007-2017 Pivotal Software, Inc.\n  ##  ##      Licensed under the MPL.  See http://www.rabbitmq.com/\n  ##  ##\n  ##########  Logs: /var/log/rabbitmq/rabbit@xxxxxxxxx.log\n  ######  ##        /var/log/rabbitmq/rabbit@xxxxxxxxx-sasl.log\n  ##########\n              Starting broker...\n completed with 6 plugins.\n')])])]),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/qq_27383857/article/details/105143928",target:"_blank",rel:"noopener noreferrer"}},[a._v("感谢大佬解答"),s("OutboundLink")],1)])])])])])])}),[],!1,null,null,null);t.default=e.exports}}]);